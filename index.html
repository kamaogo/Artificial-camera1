<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Cinematic Pro Camera</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { background-color: #000; font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; overflow: hidden; height: 100vh; display: flex; justify-content: center; align-items: center; }

        .camera-app { position: relative; width: 100%; height: 100%; max-width: 500px; background: #000; display: flex; flex-direction: column; overflow: hidden;}

        #video-preview { width: 100%; height: 100%; object-fit: cover; background: #111; transition: transform 0.2s ease-out; }

        .top-bar { position: absolute; top: 0; width: 100%; padding: 20px; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(to bottom, rgba(0,0,0,0.5), transparent); z-index: 10; }
        .icon-btn { color: white; font-size: 22px; cursor: pointer; text-shadow: 0 2px 4px rgba(0,0,0,0.5); }

        .bottom-controls { position: absolute; bottom: 0; width: 100%; padding: 30px 20px 50px; background: linear-gradient(to top, rgba(0,0,0,0.8), transparent); display: flex; flex-direction: column; align-items: center; z-index: 10; }

        .modes { display: flex; gap: 20px; margin-bottom: 30px; color: rgba(255,255,255,0.6); font-weight: 600; font-size: 14px; text-transform: uppercase; letter-spacing: 1px; }
        .mode.active { color: #FFD700; }

        .action-row { width: 100%; display: flex; justify-content: space-around; align-items: center; }
        
        .gallery-preview { width: 50px; height: 50px; border-radius: 50%; border: 2px solid white; background: url('https://via.placeholder.com/50') center/cover; }

        .shutter-outer { width: 80px; height: 80px; border-radius: 50%; border: 4px solid white; display: flex; justify-content: center; align-items: center; cursor: pointer; transition: 0.2s; }
        .shutter-inner { width: 64px; height: 64px; border-radius: 50%; background: white; transition: 0.2s; }
        .shutter-outer:active .shutter-inner { transform: scale(0.9); background: #eee; }

        .switch-btn { width: 50px; height: 50px; border-radius: 50%; background: rgba(255,255,255,0.2); display: flex; justify-content: center; align-items: center; backdrop-filter: blur(10px); }
        .switch-btn i { font-size: 20px; color: white; }

        /* জুম ইনফো ও স্লাইডার ডিজাইন */
        .zoom-container { position: absolute; bottom: 160px; display: flex; flex-direction: column; align-items: center; width: 100%; z-index: 15; }
        
        .zoom-info { background: rgba(0,0,0,0.6); color: #FFD700; padding: 5px 15px; border-radius: 20px; font-size: 14px; font-weight: bold; backdrop-filter: blur(5px); border: 1px solid rgba(255,255,255,0.3); cursor: pointer; margin-bottom: 10px; }

        .zoom-slider-wrapper { 
            display: none; /* শুরুতে লুকানো থাকবে */
            width: 80%; 
            height: 100px; 
            justify-content: center; 
            align-items: center; 
            position: relative;
        }

        /* অর্ধবৃত্তাকার এনিমেশন লুক */
        .zoom-arc {
            width: 250px;
            height: 80px;
            border-top: 2px solid rgba(255,255,255,0.3);
            border-radius: 150px 150px 0 0;
            position: relative;
            display: flex;
            justify-content: center;
        }

        input[type=range] {
            width: 100%;
            cursor: pointer;
            accent-color: #FFD700;
            background: transparent;
        }

    </style>
</head>
<body onclick="resetHider()">

    <div class="camera-app">
        <div class="top-bar">
            <i class="fas fa-bolt icon-btn"></i>
            <span style="color:white; font-weight: bold; font-size: 18px;">CinePro AI</span>
            <i class="fas fa-cog icon-btn"></i>
        </div>

        <video id="video-preview" autoplay playsinline></video>

        <div class="zoom-container">
            <div class="zoom-info" id="zoom-text" onclick="toggleZoomSlider(event)">1.0x</div>
            <div class="zoom-slider-wrapper" id="zoom-controls">
                <input type="range" id="zoom-range" min="1" max="100" step="0.1" value="1" oninput="updateZoom(this.value)" onmousedown="stayVisible()" ontouchstart="stayVisible()">
            </div>
        </div>

        <div class="bottom-controls">
            <div class="modes">
                <span class="mode">Video</span>
                <span class="mode active">Photo</span>
                <span class="mode">Cinematic</span>
            </div>

            <div class="action-row">
                <div class="gallery-preview"></div>
                <div class="shutter-outer" onclick="captureEffect()">
                    <div class="shutter-inner"></div>
                </div>
                <div class="switch-btn" onclick="switchCamera()">
                    <i class="fas fa-camera-rotate"></i>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentFacingMode = 'environment';
        let stream = null;
        let hideTimeout;

        async function startCamera(facingMode) {
            if (stream) { stream.getTracks().forEach(track => track.stop()); }
            try {
                stream = await navigator.mediaDevices.getUserMedia({
                    video: { facingMode: facingMode, width: { ideal: 1920 }, height: { ideal: 1080 } },
                    audio: false
                });
                document.getElementById('video-preview').srcObject = stream;
            } catch (err) {
                alert("ক্যামেরা এক্সেস করা সম্ভব হচ্ছে না।");
            }
        }

        // জুম কন্ট্রোল ফাংশন
        function updateZoom(value) {
            const video = document.getElementById('video-preview');
            const zoomText = document.getElementById('zoom-text');
            
            // ভিডিও জুম এনিমেশন
            video.style.transform = `scale(${value})`;
            zoomText.innerText = parseFloat(value).toFixed(1) + 'x';
            
            stayVisible(); // জুম করার সময় স্লাইডার থাকবে
        }

        function toggleZoomSlider(event) {
            event.stopPropagation();
            const controls = document.getElementById('zoom-controls');
            controls.style.display = 'flex';
            resetHider();
        }

        function stayVisible() {
            clearTimeout(hideTimeout);
            hideTimeout = setTimeout(() => {
                document.getElementById('zoom-controls').style.display = 'none';
            }, 2000); // ২ সেকেন্ড পর হাইড হবে
        }

        function resetHider() {
            stayVisible();
        }

        function switchCamera() {
            currentFacingMode = (currentFacingMode === 'user') ? 'environment' : 'user';
            startCamera(currentFacingMode);
            const video = document.getElementById('video-preview');
            video.style.opacity = 0;
            setTimeout(() => video.style.opacity = 1, 300);
        }

        function captureEffect() {
            const app = document.querySelector('.camera-app');
            app.style.opacity = '0.5';
            setTimeout(() => app.style.opacity = '1', 100);
            console.log("Photo Captured at zoom: " + document.getElementById('zoom-range').value);
        }

        startCamera(currentFacingMode);
    </script>
</body>
</html>
